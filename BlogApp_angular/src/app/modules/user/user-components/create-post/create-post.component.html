<div class="create-post-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="page-title">
      <mat-icon>add_circle</mat-icon>
      <h1>Create New Post</h1>
    </div>
    <p class="page-subtitle">
      Share your thoughts, stories, and knowledge with the community
    </p>
  </div>

  <!-- Main Form Section -->
  <div class="form-section">
    <mat-card>
      <mat-card-content>
        <form [formGroup]="postForm">
          <!-- Post Title Section -->
          <div class="form-group">
            <h3 class="form-group-title">
              <mat-icon>title</mat-icon>
              Post Title
            </h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Enter a compelling title for your post</mat-label>
              <input matInput formControlName="name" />
              <mat-hint
                >A good title helps readers understand what to expect</mat-hint
              >
            </mat-form-field>
          </div>

          <!-- File Upload Section -->
          <div class="form-group">
            <h3 class="form-group-title">
              <mat-icon>attach_file</mat-icon>
              Attach Media
            </h3>
            <div class="file-upload-area">
              <input
                type="file"
                id="fileInput"
                #fileInput
                (change)="onFileSelected($event)"
                accept=".jpg,.jpeg,.png,.gif,.txt,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"
                style="display: none"
              />

              <div class="file-upload-buttons">
                <button
                  type="button"
                  mat-stroked-button
                  (click)="fileInput.click()"
                  [disabled]="isUploading"
                >
                  <mat-icon>attach_file</mat-icon>
                  Select a file
                </button>

                <button
                  type="button"
                  mat-stroked-button
                  color="warn"
                  (click)="removeSelectedFile()"
                  *ngIf="selectedFile"
                  [disabled]="isUploading"
                >
                  <mat-icon>delete</mat-icon>
                  Delete a file
                </button>
              </div>
              <div *ngIf="selectedFile" class="file-info">
                <mat-card class="file-card">
                  <mat-card-content>
                    <div class="file-details">
                      <mat-icon class="file-icon">
                        {{ getFileIcon() }}
                      </mat-icon>

                      <div class="file-text">
                        <p class="file-name">
                          <strong>{{ selectedFile.name }}</strong>
                        </p>
                        <p class="file-type">{{ getFileTypeDisplay() }}</p>
                        <p class="file-size">
                          {{ (selectedFile.size / 1024).toFixed(2) }} KB
                        </p>
                      </div>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>

              <!-- Preview pentru imagini -->
              <div *ngIf="filePreview" class="image-preview">
                <img [src]="filePreview" alt="Preview" />
              </div>
            </div>
          </div>

          <!-- File Name Section -->
          <div class="form-group" *ngIf="selectedFile">
            <h3 class="form-group-title">
              <mat-icon>label</mat-icon>
              File Display Name
            </h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Custom name for your file</mat-label>
              <input matInput formControlName="fileName" />
              <mat-hint
                >This name will be shown to readers instead of the original
                filename</mat-hint
              >
            </mat-form-field>
          </div>

          <!-- Content Section -->
          <div class="form-group">
            <h3 class="form-group-title">
              <mat-icon>article</mat-icon>
              Post Content
            </h3>
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Write your content here</mat-label>
              <textarea matInput rows="8" formControlName="content"></textarea>
              <mat-hint
                >Express yourself freely - up to 5000 characters</mat-hint
              >
            </mat-form-field>
          </div>

          <!-- Tags Section -->
          <div class="form-group">
            <h3 class="form-group-title">
              <mat-icon>local_offer</mat-icon>
              Tags
            </h3>
            <div class="tags-container">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label
                  >Add tags to help others discover your post</mat-label
                >
                <mat-chip-grid #chipGrid aria-label="Enter tags">
                  <mat-chip-row
                    *ngFor="let tag of tags; trackBy: trackByTag"
                    (removed)="removeTags(tag)"
                    class="custom-chip"
                  >
                    {{ tag }}
                    <button matChipRemove>
                      <mat-icon>cancel</mat-icon>
                    </button>
                  </mat-chip-row>
                </mat-chip-grid>
                <input
                  [matChipInputFor]="chipGrid"
                  (matChipInputTokenEnd)="addTags($event)"
                  (keydown)="onKeyDown($event)"
                />
                <mat-hint
                  >Tags help categorize your content. Press Enter to add each
                  tag.</mat-hint
                >
              </mat-form-field>
            </div>
          </div>

          <!-- Submit Section -->
          <div class="submit-section">
            <button
              mat-raised-button
              color="primary"
              class="create-btn"
              [disabled]="!postForm.valid"
              (click)="createPost()"
            >
              <mat-icon>publish</mat-icon>
              Create Post
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
