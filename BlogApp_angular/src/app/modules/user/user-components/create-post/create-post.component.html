<mat-card>
  <mat-card-content>
    <div>
      <form [formGroup]="postForm">
        <mat-form-field appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" />
        </mat-form-field>

        <div class="file-upload-section">
          <h3>Attach a file</h3>

          <input
            type="file"
            id="fileInput"
            #fileInput
            (change)="onFileSelected($event)"
            accept=".jpg,.jpeg,.png,.gif,.txt,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"
            style="display: none;"
          />

          <div class="file-upload-buttons">
            <button
              type="button"
              mat-stroked-button
              (click)="fileInput.click()"
              [disabled]="isUploading"
            >
              <mat-icon>attach_file</mat-icon>
              Select a file
            </button>

            <button
              type="button"
              mat-stroked-button
              color="warn"
              (click)="removeSelectedFile()"
              *ngIf="selectedFile"
              [disabled]="isUploading"
            >
              <mat-icon>delete</mat-icon>
              Delete a file
            </button>
          </div>
          <div *ngIf="selectedFile" class="file-info">
            <mat-card class="file-card">
              <mat-card-content>
                <div class="file-details">
                  <mat-icon class="file-icon">
                    {{ getFileIcon() }}
                  </mat-icon>

                  <div class="file-text">
                    <p class="file-name"><strong>{{ selectedFile.name }}</strong></p>
                    <p class="file-type">{{ getFileTypeDisplay() }}</p>
                    <p class="file-size">{{ (selectedFile.size / 1024).toFixed(2) }} KB</p>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>

          <!-- Preview pentru imagini -->
          <div *ngIf="filePreview" class="image-preview">
            <img [src]="filePreview" alt="Preview" />
          </div>

        </div>

        <mat-form-field appearance="fill">
          <mat-label>File Name</mat-label>
          <input matInput formControlName="fileName" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Content</mat-label>
          <textarea matInput rows="5" formControlName="content"></textarea>
        </mat-form-field>

        <section>
          <mat-form-field class="example-form-field">
            <mat-label>Tags</mat-label>
            <mat-chip-grid #chipGrid aria-label="Enter tags">
              <mat-chip-row
                *ngFor="let tag of tags; trackBy: trackByTag"
                (removed)="removeTags(tag)"
              >
                {{ tag }}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
            </mat-chip-grid>
            <input
              placeholder="New tag..."
              [matChipInputFor]="chipGrid"
              (matChipInputTokenEnd)="addTags($event)"
              (keydown)="onKeyDown($event)"
            />
          </mat-form-field>
        </section>

        <button mat-raised-button color="primary" [disabled]="!postForm.valid" (click)="createPost()">
          Create new post
        </button>
      </form>
    </div>
  </mat-card-content>
</mat-card>
